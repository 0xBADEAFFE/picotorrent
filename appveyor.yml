# AppVeyor build configuration

os: Visual Studio 2017

branches:
  except:
  - master

environment:
  matrix:
   - platform: x86
     CMAKE_PREFIX_PATH: C:\Qt\5.11.2\msvc2015

   - platform: x64
     CMAKE_PREFIX_PATH: C:\Qt\5.11.2\msvc2017_64

# Build script
build_script:
- git submodule update --init
- powershell -NoProfile -ExecutionPolicy unrestricted -Command .\build.ps1 -Platform %platform%

# Publish artifacts
artifacts:
 - path: build-*/Release/packages/PicoTorrent-*-*.appx
 - path: build-*/Release/packages/PicoTorrent-*-*.exe
 - path: build-*/Release/packages/PicoTorrent-*-*.zip

test: off
